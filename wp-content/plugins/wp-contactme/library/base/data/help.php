<?php
/*****************************************************************************************
* class to centralise help links and icons in the application.json file
*****************************************************************************************/
class bv48fv_data_help extends bv48fv_base {
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	protected $_tag;
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function __construct(&$application, $tag) {
		parent::__construct ( $application );
		if(!isset($application->help_meta->$tag))
		{
			$tag = '_empty';
		}
		$this->_tag = $tag;
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	private function _help()
	{
		$tag = $this->_tag;
		return $this->application()->help_meta->$tag;
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	private function item($name)
	{
		if(isset($this->_help()->$name))
		{
			return $this->_help()->$name;
		}
		else
		{
			return $this->application()->help_meta->_empty->$name;
		}
		return '';
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function url()
	{
		return $this->item('url');
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function title()
	{
		return $this->item('title');
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function text()
	{
		return $this->item('text');
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function css()
	{
		return $this->item('css');
	}
/*****************************************************************************************
* ??document??
*****************************************************************************************/
	public function render($link_text='')
	{
		$url = $this->url();
		if($url=='#')
		{
			$return = $link_text;
		}
		else
		{
			$title = $this->title();
			$css = $this->css();
			if($title!='')
			{
				$title = "title='{$title}'";
			}
			if($css!='')
			{
				$css = "class='{$css}'";
			}
			$return = "<a href='{$url}' {$css} {$title}>{$link_text}</a>";
		}
		return $return;
	}
}